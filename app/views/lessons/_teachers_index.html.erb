
  <% if current_user.students.ids.empty? %>
  <div class="container">
    <h2 class= "p-3 mb-2 bg-light text-dark"><%= t('no_students_message') %></h2>
  </div>

  <br>
  
  <% else %>

  <div class="container">
      <div class="p-3 mb-2 bg-light text-dark text-center">
        Clases próximas: <strong> <%= @user.lessons.where( status_id: "Próxima").count(:time_duration_id) %></strong> &nbsp
        Clases completadas: <strong> <%= @user.lessons.where( status_id: "Completada").count(:time_duration_id) %></strong>&nbsp
        Horas completadas: <strong> <%= @user.lessons.where( status_id: "Completada").sum(:time_duration_id)/60 %></strong> hrs
      </div>
      <div class="p-3 mb-2 bg-light text-dark text-center">
        Dinero por recibir: <strong> <%= @user.lessons.where( status_id: "Completada", payment_id: "No").sum(:time_duration_id)/60*200 + @user.lessons.where( status_id: "Perdida por el estudiante", payment_id: "No").sum(:time_duration_id)/60*200 - @user.lessons.where( status_id: "Perdida por el profesor", payment_id: "No").sum(:time_duration_id)/60*200%> </strong> MXN &nbsp
        Dinero total ganado: <strong> <%= @user.lessons.where( status_id: "Completada", payment_id: "Si").sum(:time_duration_id)/60*200 + @user.lessons.where( status_id: "Perdida por el estudiante", payment_id: "Si").sum(:time_duration_id)/60*200 - @user.lessons.where( status_id: "Perdida por el profesor", payment_id: "Si").sum(:time_duration_id)/60*200 %> </strong></MXN> MXN &nbsp
      </div>
      <div class="p-3 mb-2 bg-light text-dark text-center">
        <p><strong>Política de cancelación</strong></p>
        Clases ganadas: <strong><%= @user.lessons.where( status_id: "Perdida por el estudiante").count(:time_duration_id) %> </strong> / Dinero ganado: <strong><%= @user.lessons.where( status_id: "Perdida por el estudiante", payment_id: "Si").sum(:time_duration_id)/60*200 %> MXN </strong> &nbsp &nbsp
        Clases perdidas: <strong><%= @user.lessons.where( status_id: "Perdida por el profesor").count(:time_duration_id) %> </strong> / Dinero perdido: <strong><%= @user.lessons.where( status_id: "Perdida por el profesor", payment_id: "Si").sum(:time_duration_id)/60*200 %> MXN </strong> &nbsp &nbsp
      </div>

      <br>

    <span><%= link_to t('new_class'), new_lesson_path, class: "btn btn-primary float-right" %></span>
  <% end %>
      <h1><%= t('lessons_title') %></h1>
  </div>
  <br>

  <table class="table">
    <thead>
      <tr>
        <th><%= t('type_of_class') %></th>
        <th><%= t('student_name_class') %></th>
        <th><%= t('incoming_date_class') %></th>
        <th><%= t('class_duration') %></th>
        <th><%= t('class_language') %></th>
        <th><%= t('status_class') %></th>
        <th><%= t('paid_class') %></th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% for user in @lessons_teachers %>
        <tr>
          <td><%= link_to user.class_type_id, user %></td>
          <td> <%= link_to User.find_by(id: "#{user.student_id}").name, "users/#{user.student_id}" %></td>          
          <td><%= user.date_id.to_formatted_s(:long) %></td>
          <td><%= user.time_duration_id/60 %><p> <%= t('hours') %> </p></td>
          <td> <%= Language.find_by(id: "#{user.language_id}").name %></td>
          <td><%= user.status_id %></td>
          <td><%= user.payment_id %></td>
          <td><%= link_to '', edit_lesson_path(user),class:"fa fa-edit fa-x" %></td>
          <td><%= link_to '', user, method: :delete, data: { confirm: t('delete_message') }, class:"fa fa-close fa-x",style:"color:#DC3C45" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

